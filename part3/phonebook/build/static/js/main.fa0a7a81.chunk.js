(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(5),o=t(7),i=t(4),u=t(2),s=t(3),d=t.n(s),l="/api/persons",j=function(){return d.a.get(l).then((function(e){return e.data}))},b=function(e){return d.a.post(l,e).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=t(0),O=function(e){var n=e.filter,t=e.handleFilterChange;return Object(m.jsxs)("div",{children:["filter show with",Object(m.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.addPerson,t=e.newPerson,c=e.handlePersonFormChange;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name:",Object(m.jsx)("input",{name:"name",value:t.name,onChange:c})]}),Object(m.jsxs)("div",{children:["number:",Object(m.jsx)("input",{name:"number",value:t.number,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.persons,t=e.filter,c=e.handleDelete;return Object(m.jsx)("ul",{children:n.filter((function(e){return function(e){return e.name.toLowerCase().includes(t.toLowerCase())}(e)})).map((function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.name)}))})},v=function(e){var n=e.notification;return null===n?null:"error"===n.type?Object(m.jsx)("div",{className:"error",children:n.message}):Object(m.jsx)("div",{className:"success",children:n.message})},g=function(){var e=Object(u.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)({name:"",number:""}),s=Object(i.a)(r,2),d=s[0],l=s[1],g=Object(u.useState)(""),w=Object(i.a)(g,2),C=w[0],y=w[1],k=Object(u.useState)(null),P=Object(i.a)(k,2),S=P[0],D=P[1];Object(u.useEffect)((function(){j().then((function(e){return c(e)}))}),[]);return Object(m.jsxs)("div",{children:[Object(m.jsx)(v,{notification:S}),Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(O,{filter:C,handleFilterChange:function(e){y(e.target.value)}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(p,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d.name}));n?window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))&&f(n.id,d).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),l({name:"",number:""}),D({type:"success",message:"Changed ".concat(d.name,"'s phone number")}),setTimeout((function(){D(null)}),3e3)})):b(d).then((function(e){c(t.concat(e)),l({name:"",number:""}),D({type:"success",message:"Added ".concat(d.name)}),setTimeout((function(){D(null)}),3e3)}))},newPerson:d,handlePersonFormChange:function(e){l(Object(o.a)(Object(o.a)({},d),{},Object(a.a)({},e.target.name,e.target.value)))}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(x,{persons:t,filter:C,handleDelete:function(e){window.confirm("Delete ".concat(e.name))&&h(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){D({type:"error",message:"".concat(e.name," was already deleted from the server")}),c(t.filter((function(n){return n.id!==e.id}))),setTimeout((function(){D(null)}),3e3)}))}})]})};t(40);r.a.render(Object(m.jsx)(g,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.fa0a7a81.chunk.js.map